"use strict";exports.EventEmitter=EventEmitter;var objToString=Object.prototype.toString;function isArray(a){return objToString.call(a)==="[object Array]"}function EventEmitter(){}EventEmitter.prototype.on=function(a,b){if(!this.$events){this.$events={}}if(!this.$events[a]){this.$events[a]=b}else{if(isArray(this.$events[a])){this.$events[a].push(b)}else{this.$events[a]=[this.$events[a],b]}}return this};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.once=function(c,d){var b=this;function a(){b.removeListener(c,a);d.apply(this,arguments)}a.listener=d;this.on(c,a);return this};EventEmitter.prototype.removeListener=function(b,d){if(this.$events&&this.$events[b]){var e=this.$events[b];if(isArray(e)){var f=-1;for(var c=0,a=e.length;c<a;c++){if(e[c]===d||(e[c].listener&&e[c].listener===d)){f=c;break}}if(f<0){return this}e.splice(f,1);if(!e.length){delete this.$events[b]}}else{if(e===d||(e.listener&&e.listener===d)){delete this.$events[b]}}}return this};EventEmitter.prototype.removeAllListeners=function(a){if(a===undefined){this.$events={};return this}if(this.$events&&this.$events[a]){this.$events[a]=null}return this};EventEmitter.prototype.listeners=function(a){if(!this.$events){this.$events={}}if(!this.$events[a]){this.$events[a]=[]}if(!isArray(this.$events[a])){this.$events[a]=[this.$events[a]]}return this.$events[a]};EventEmitter.prototype.emit=function(c){if(!this.$events){return false}var f=this.$events[c];if(!f){return false}var b=Array.prototype.slice.call(arguments,1);if(typeof f==="function"){f.apply(this,b)}else{if(isArray(f)){var e=f.slice();for(var d=0,a=e.length;d<a;d++){e[d].apply(this,b)}}else{return false}}return true};