/*!
 * range-parser
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015-2016 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";module.exports=rangeParser;function rangeParser(j,h,k){var g=h.indexOf("=");if(g===-1){return -2}var f=h.slice(g+1).split(",");var a=[];a.type=h.slice(0,g);for(var d=0;d<f.length;d++){var e=f[d].split("-");var b=parseInt(e[0],10);var c=parseInt(e[1],10);if(isNaN(b)){b=j-c;c=j-1}else{if(isNaN(c)){c=j-1}}if(c>j-1){c=j-1}if(isNaN(b)||isNaN(c)||b>c||b<0){continue}a.push({start:b,end:c})}if(a.length<1){return -1}return k&&k.combine?combineRanges(a):a}function combineRanges(b){var a=b.map(mapWithIndex).sort(sortByRangeStart);for(var d=0,f=1;f<a.length;f++){var c=a[f];var g=a[d];if(c.start>g.end+1){a[++d]=c}else{if(c.end>g.end){g.end=c.end;g.index=Math.min(g.index,c.index)}}}a.length=d+1;var e=a.sort(sortByRangeIndex).map(mapWithoutIndex);e.type=b.type;return e}function mapWithIndex(a,b){return{start:a.start,end:a.end,index:b}}function mapWithoutIndex(a){return{start:a.start,end:a.end}}function sortByRangeIndex(d,c){return d.index-c.index}function sortByRangeStart(d,c){return d.start-c.start};