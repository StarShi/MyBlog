var mkdirp=require("../");var path=require("path");var test=require("tap").test;var mockfs=require("mock-fs");var _0777=parseInt("0777",8);var _0755=parseInt("0755",8);test("opts.fs sync",function(d){d.plan(4);var a=Math.floor(Math.random()*Math.pow(16,4)).toString(16);var f=Math.floor(Math.random()*Math.pow(16,4)).toString(16);var e=Math.floor(Math.random()*Math.pow(16,4)).toString(16);var c="/beep/boop/"+[a,f,e].join("/");var b=mockfs.fs();mkdirp.sync(c,{fs:b,mode:_0755});b.exists(c,function(g){d.ok(g,"created file");b.stat(c,function(i,h){d.ifError(i);d.equal(h.mode&_0777,_0755);d.ok(h.isDirectory(),"target not a directory")})})});