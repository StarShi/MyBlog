var mkdirp=require("../");var path=require("path");var fs=require("fs");var exists=fs.exists||path.exists;var test=require("tap").test;var _0777=parseInt("0777",8);var _0755=parseInt("0755",8);test("async perm",function(b){b.plan(5);var a="/tmp/"+(Math.random()*(1<<30)).toString(16);mkdirp(a,_0755,function(c){b.ifError(c);exists(a,function(d){b.ok(d,"file created");fs.stat(a,function(f,e){b.ifError(f);b.equal(e.mode&_0777,_0755);b.ok(e.isDirectory(),"target not a directory")})})})});test("async root perm",function(a){mkdirp("/tmp",_0755,function(b){if(b){a.fail(b)}a.end()});a.end()});