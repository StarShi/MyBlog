"use strict";var es5=require("./es5");var Objectfreeze=es5.freeze;var util=require("./util");var inherits=util.inherits;var notEnumerableProp=util.notEnumerableProp;function subError(a,c){function b(d){if(!(this instanceof b)){return new b(d)}notEnumerableProp(this,"message",typeof d==="string"?d:c);notEnumerableProp(this,"name",a);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else{Error.call(this)}}inherits(b,Error);return b}var _TypeError,_RangeError;var Warning=subError("Warning","warning");var CancellationError=subError("CancellationError","cancellation error");var TimeoutError=subError("TimeoutError","timeout error");var AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError;_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error");_RangeError=subError("RangeError","range error")}var methods=("join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var i=0;i<methods.length;++i){if(typeof Array.prototype[methods[i]]==="function"){AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]}}es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});AggregateError.prototype.isOperational=true;var level=0;AggregateError.prototype.toString=function(){var a=Array(level*4+1).join(" ");var d="\n"+a+"AggregateError of:\n";level++;a=Array(level*4+1).join(" ");for(var f=0;f<this.length;++f){var g=this[f]===this?"[Circular AggregateError]":this[f]+"";var b=g.split("\n");for(var c=0;c<b.length;++c){b[c]=a+b[c]}g=b.join("\n");d+=g+"\n"}level--;return d};function OperationalError(a){if(!(this instanceof OperationalError)){return new OperationalError(a)}notEnumerableProp(this,"name","OperationalError");notEnumerableProp(this,"message",a);this.cause=a;this["isOperational"]=true;if(a instanceof Error){notEnumerableProp(this,"message",a.message);notEnumerableProp(this,"stack",a.stack)}else{if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}}}inherits(OperationalError,Error);var errorTypes=Error.__BluebirdErrorTypes__;if(!errorTypes){errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError});es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:false,enumerable:false,configurable:false})}module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning};