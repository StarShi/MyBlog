"use strict";module.exports=function(f){var d=false;var b=[];f.prototype._promiseCreated=function(){};f.prototype._pushContext=function(){};f.prototype._popContext=function(){return null};f._peekContext=f.prototype._peekContext=function(){};function a(){this._trace=new a.CapturedTrace(e())}a.prototype._pushContext=function(){if(this._trace!==undefined){this._trace._promiseCreated=null;b.push(this._trace)}};a.prototype._popContext=function(){if(this._trace!==undefined){var h=b.pop();var g=h._promiseCreated;h._promiseCreated=null;return g}return null};function c(){if(d){return new a()}}function e(){var g=b.length-1;if(g>=0){return b[g]}return undefined}a.CapturedTrace=null;a.create=c;a.deactivateLongStackTraces=function(){};a.activateLongStackTraces=function(){var j=f.prototype._pushContext;var h=f.prototype._popContext;var i=f._peekContext;var g=f.prototype._peekContext;var k=f.prototype._promiseCreated;a.deactivateLongStackTraces=function(){f.prototype._pushContext=j;f.prototype._popContext=h;f._peekContext=i;f.prototype._peekContext=g;f.prototype._promiseCreated=k;d=false};d=true;f.prototype._pushContext=a.prototype._pushContext;f.prototype._popContext=a.prototype._popContext;f._peekContext=f.prototype._peekContext=e;f.prototype._promiseCreated=function(){var l=this._peekContext();if(l&&l._promiseCreated==null){l._promiseCreated=this}}};return a};