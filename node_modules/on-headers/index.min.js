/*!
 * on-headers
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";var slice=Array.prototype.slice;module.exports=function onHeaders(a,b){if(!a){throw new TypeError("argument res is required")}if(typeof b!=="function"){throw new TypeError("argument listener must be a function")}a.writeHead=createWriteHead(a.writeHead,b)};function createWriteHead(a,c){var d=false;return function b(f){var e=setWriteHeadHeaders.apply(this,arguments);if(!d){d=true;c.call(this);if(typeof e[0]==="number"&&this.statusCode!==e[0]){e[0]=this.statusCode;e.length=1}}a.apply(this,e)}}function setWriteHeadHeaders(e){var a=arguments.length;var d=a>1&&typeof arguments[1]==="string"?2:1;var b=a>=d+1?arguments[d]:undefined;this.statusCode=e;if(Array.isArray(b)){for(var f=0,g=b.length;f<g;++f){this.setHeader(b[f][0],b[f][1])}}else{if(b){var j=Object.keys(b);for(var f=0;f<j.length;f++){var c=j[f];if(c){this.setHeader(c,b[c])}}}}var h=new Array(Math.min(a,d));for(var f=0;f<h.length;f++){h[f]=arguments[f]}return h};