"use strict";var Buffer=require("buffer").Buffer;module.exports={utf8:{type:"_internal",bomAware:true},cesu8:{type:"_internal",bomAware:true},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:true},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:InternalCodec};function InternalCodec(b,a){this.enc=b.encodingName;this.bomAware=b.bomAware;if(this.enc==="base64"){this.encoder=InternalEncoderBase64}else{if(this.enc==="cesu8"){this.enc="utf8";this.encoder=InternalEncoderCesu8;if(new Buffer("eda0bdedb2a9","hex").toString()!=="ðŸ’©"){this.decoder=InternalDecoderCesu8;this.defaultCharUnicode=a.defaultCharUnicode}}}}InternalCodec.prototype.encoder=InternalEncoder;InternalCodec.prototype.decoder=InternalDecoder;var StringDecoder=require("string_decoder").StringDecoder;if(!StringDecoder.prototype.end){StringDecoder.prototype.end=function(){}}function InternalDecoder(a,b){StringDecoder.call(this,b.enc)}InternalDecoder.prototype=StringDecoder.prototype;function InternalEncoder(a,b){this.enc=b.enc}InternalEncoder.prototype.write=function(a){return new Buffer(a,this.enc)};InternalEncoder.prototype.end=function(){};function InternalEncoderBase64(a,b){this.prevStr=""}InternalEncoderBase64.prototype.write=function(b){b=this.prevStr+b;var a=b.length-(b.length%4);this.prevStr=b.slice(a);b=b.slice(0,a);return new Buffer(b,"base64")};InternalEncoderBase64.prototype.end=function(){return new Buffer(this.prevStr,"base64")};function InternalEncoderCesu8(a,b){}InternalEncoderCesu8.prototype.write=function(d){var b=new Buffer(d.length*3),e=0;for(var c=0;c<d.length;c++){var a=d.charCodeAt(c);if(a<128){b[e++]=a}else{if(a<2048){b[e++]=192+(a>>>6);b[e++]=128+(a&63)}else{b[e++]=224+(a>>>12);b[e++]=128+((a>>>6)&63);b[e++]=128+(a&63)}}}return b.slice(0,e)};InternalEncoderCesu8.prototype.end=function(){};function InternalDecoderCesu8(a,b){this.acc=0;this.contBytes=0;this.accBytes=0;this.defaultCharUnicode=b.defaultCharUnicode}InternalDecoderCesu8.prototype.write=function(b){var f=this.acc,e=this.contBytes,g=this.accBytes,d="";for(var c=0;c<b.length;c++){var a=b[c];if((a&192)!==128){if(e>0){d+=this.defaultCharUnicode;e=0}if(a<128){d+=String.fromCharCode(a)}else{if(a<224){f=a&31;e=1;g=1}else{if(a<240){f=a&15;e=2;g=1}else{d+=this.defaultCharUnicode}}}}else{if(e>0){f=(f<<6)|(a&63);e--;g++;if(e===0){if(g===2&&f<128&&f>0){d+=this.defaultCharUnicode}else{if(g===3&&f<2048){d+=this.defaultCharUnicode}else{d+=String.fromCharCode(f)}}}}else{d+=this.defaultCharUnicode}}}this.acc=f;this.contBytes=e;this.accBytes=g;return d};InternalDecoderCesu8.prototype.end=function(){var a=0;if(this.contBytes>0){a+=this.defaultCharUnicode}return a};