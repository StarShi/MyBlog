/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";var db=require("mime-db");var extname=require("path").extname;var EXTRACT_TYPE_REGEXP=/^\s*([^;\s]*)(?:;|\s|$)/;var TEXT_TYPE_REGEXP=/^text\//i;exports.charset=charset;exports.charsets={lookup:charset};exports.contentType=contentType;exports.extension=extension;exports.extensions=Object.create(null);exports.lookup=lookup;exports.types=Object.create(null);populateMaps(exports.extensions,exports.types);function charset(b){if(!b||typeof b!=="string"){return false}var a=EXTRACT_TYPE_REGEXP.exec(b);var c=a&&db[a[1].toLowerCase()];if(c&&c.charset){return c.charset}if(a&&TEXT_TYPE_REGEXP.test(a[1])){return"UTF-8"}return false}function contentType(b){if(!b||typeof b!=="string"){return false}var a=b.indexOf("/")===-1?exports.lookup(b):b;if(!a){return false}if(a.indexOf("charset")===-1){var c=exports.charset(a);if(c){a+="; charset="+c.toLowerCase()}}return a}function extension(c){if(!c||typeof c!=="string"){return false}var a=EXTRACT_TYPE_REGEXP.exec(c);var b=a&&exports.extensions[a[1].toLowerCase()];if(!b||!b.length){return false}return b[0]}function lookup(a){if(!a||typeof a!=="string"){return false}var b=extname("x."+a).toLowerCase().substr(1);if(!b){return false}return exports.types[b]||false}function populateMaps(c,b){var a=["nginx","apache",undefined,"iana"];Object.keys(db).forEach(function d(g){var h=db[g];var f=h.extensions;if(!f||!f.length){return}c[g]=f;for(var e=0;e<f.length;e++){var l=f[e];if(b[l]){var k=a.indexOf(db[b[l]].source);var j=a.indexOf(h.source);if(b[l]!=="application/octet-stream"&&(k>j||(k===j&&b[l].substr(0,12)==="application/"))){continue}}b[l]=g}})};