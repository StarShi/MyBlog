"use strict";module.exports=preferredEncodings;module.exports.preferredEncodings=preferredEncodings;var simpleEncodingRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function parseAcceptEncoding(d){var c=d.split(",");var g=false;var f=1;for(var b=0,a=0;b<c.length;b++){var e=parseEncoding(c[b].trim(),b);if(e){c[a++]=e;g=g||specify("identity",e);f=Math.min(f,e.q||1)}}if(!g){c[a++]={encoding:"identity",q:f,i:b}}c.length=a;return c}function parseEncoding(g,b){var a=simpleEncodingRegExp.exec(g);if(!a){return null}var c=a[1];var d=1;if(a[2]){var f=a[2].split(";");for(var b=0;b<f.length;b++){var e=f[b].trim().split("=");if(e[0]==="q"){d=parseFloat(e[1]);break}}}return{encoding:c,q:d,i:b}}function getEncodingPriority(e,f,b){var d={o:-1,q:0,s:0};for(var c=0;c<f.length;c++){var a=specify(e,f[c],b);if(a&&(d.s-a.s||d.q-a.q||d.o-a.o)<0){d=a}}return d}function specify(d,a,b){var c=0;if(a.encoding.toLowerCase()===d.toLowerCase()){c|=1}else{if(a.encoding!=="*"){return null}}return{i:b,o:a.i,q:a.q,s:c}}function preferredEncodings(e,b){var d=parseAcceptEncoding(e||"");if(!b){return d.filter(isQuality).sort(compareSpecs).map(getFullEncoding)}var c=b.map(function f(h,g){return getEncodingPriority(h,d,g)});return c.filter(isQuality).sort(compareSpecs).map(function a(g){return b[c.indexOf(g)]})}function compareSpecs(d,c){return(c.q-d.q)||(c.s-d.s)||(d.o-c.o)||(d.i-c.i)||0}function getFullEncoding(a){return a.encoding}function isQuality(a){return a.q>0};