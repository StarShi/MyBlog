"use strict";module.exports=preferredLanguages;module.exports.preferredLanguages=preferredLanguages;var simpleLanguageRegExp=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function parseAcceptLanguage(e){var d=e.split(",");for(var c=0,b=0;c<d.length;c++){var a=parseLanguage(d[c].trim(),c);if(a){d[b++]=a}}d.length=b;return d}function parseLanguage(h,d){var e=simpleLanguageRegExp.exec(h);if(!e){return null}var f=e[1],j=e[2],g=f;if(j){g+="-"+j}var a=1;if(e[3]){var c=e[3].split(";");for(var d=0;d<c.length;d++){var b=c[d].split("=");if(b[0]==="q"){a=parseFloat(b[1])}}}return{prefix:f,suffix:j,q:a,i:d,full:g}}function getLanguagePriority(f,e,b){var d={o:-1,q:0,s:0};for(var c=0;c<e.length;c++){var a=specify(f,e[c],b);if(a&&(d.s-a.s||d.q-a.q||d.o-a.o)<0){d=a}}return d}function specify(e,a,b){var d=parseLanguage(e);if(!d){return null}var c=0;if(a.full.toLowerCase()===d.full.toLowerCase()){c|=4}else{if(a.prefix.toLowerCase()===d.full.toLowerCase()){c|=2}else{if(a.full.toLowerCase()===d.prefix.toLowerCase()){c|=1}else{if(a.full!=="*"){return null}}}}return{i:b,o:a.i,q:a.q,s:c}}function preferredLanguages(d,a){var c=parseAcceptLanguage(d===undefined?"*":d||"");if(!a){return c.filter(isQuality).sort(compareSpecs).map(getFullLanguage)}var b=a.map(function f(h,g){return getLanguagePriority(h,c,g)});return b.filter(isQuality).sort(compareSpecs).map(function e(g){return a[b.indexOf(g)]})}function compareSpecs(d,c){return(c.q-d.q)||(c.s-d.s)||(d.o-c.o)||(d.i-c.i)||0}function getFullLanguage(a){return a.full}function isQuality(a){return a.q>0};