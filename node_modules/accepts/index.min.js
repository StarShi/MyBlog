/*!
 * accepts
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";var Negotiator=require("negotiator");var mime=require("mime-types");module.exports=Accepts;function Accepts(a){if(!(this instanceof Accepts)){return new Accepts(a)}this.headers=a.headers;this.negotiator=new Negotiator(a)}Accepts.prototype.type=Accepts.prototype.types=function(e){var d=e;if(d&&!Array.isArray(d)){d=new Array(arguments.length);for(var c=0;c<d.length;c++){d[c]=arguments[c]}}if(!d||d.length===0){return this.negotiator.mediaTypes()}if(!this.headers.accept){return d[0]}var a=d.map(extToMime);var b=this.negotiator.mediaTypes(a.filter(validMime));var f=b[0];return f?d[a.indexOf(f)]:false};Accepts.prototype.encoding=Accepts.prototype.encodings=function(c){var b=c;if(b&&!Array.isArray(b)){b=new Array(arguments.length);for(var a=0;a<b.length;a++){b[a]=arguments[a]}}if(!b||b.length===0){return this.negotiator.encodings()}return this.negotiator.encodings(b)[0]||false};Accepts.prototype.charset=Accepts.prototype.charsets=function(a){var b=a;if(b&&!Array.isArray(b)){b=new Array(arguments.length);for(var c=0;c<b.length;c++){b[c]=arguments[c]}}if(!b||b.length===0){return this.negotiator.charsets()}return this.negotiator.charsets(b)[0]||false};Accepts.prototype.lang=Accepts.prototype.langs=Accepts.prototype.language=Accepts.prototype.languages=function(b){var c=b;if(c&&!Array.isArray(c)){c=new Array(arguments.length);for(var a=0;a<c.length;a++){c[a]=arguments[a]}}if(!c||c.length===0){return this.negotiator.languages()}return this.negotiator.languages(c)[0]||false};function extToMime(a){return a.indexOf("/")===-1?mime.lookup(a):a}function validMime(a){return typeof a==="string"};