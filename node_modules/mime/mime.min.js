var path=require("path");var fs=require("fs");function Mime(){this.types=Object.create(null);this.extensions=Object.create(null)}Mime.prototype.define=function(d){for(var c in d){var b=d[c];for(var a=0;a<b.length;a++){if(process.env.DEBUG_MIME&&this.types[b[a]]){console.warn((this._loading||"define()").replace(/.*\//,""),'changes "'+b[a]+'" extension type from '+this.types[b[a]]+" to "+c)}this.types[b[a]]=c}if(!this.extensions[c]){this.extensions[c]=b[0]}}};Mime.prototype.load=function(b){this._loading=b;var d={},c=fs.readFileSync(b,"ascii"),a=c.split(/[\r\n]+/);a.forEach(function(f){var e=f.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);d[e.shift()]=e});this.define(d);this._loading=null};Mime.prototype.lookup=function(b,c){var a=b.replace(/^.*[\.\/\\]/,"").toLowerCase();return this.types[a]||c||this.default_type};Mime.prototype.extension=function(b){var a=b.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[a]};var mime=new Mime();mime.define(require("./types.json"));mime.default_type=mime.lookup("bin");mime.Mime=Mime;mime.charsets={lookup:function(a,b){return(/^text\/|^application\/(javascript|json)/).test(a)?"UTF-8":b}};module.exports=mime;