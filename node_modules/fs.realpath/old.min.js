var pathModule=require("path");var isWindows=process.platform==="win32";var fs=require("fs");var DEBUG=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function rethrow(){var d;if(DEBUG){var a=new Error;d=c}else{d=b}return d;function c(e){if(e){a.message=e.message;e=a;b(e)}}function b(e){if(e){if(process.throwDeprecation){throw e}else{if(!process.noDeprecation){var f="fs: missing callback "+(e.stack||e.message);if(process.traceDeprecation){console.trace(f)}else{console.error(f)}}}}}}function maybeCallback(a){return typeof a==="function"?a:rethrow()}var normalize=pathModule.normalize;if(isWindows){var nextPartRe=/(.*?)(?:[\/\\]+|$)/g}else{var nextPartRe=/(.*?)(?:[\/]+|$)/g}if(isWindows){var splitRootRe=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/}else{var splitRootRe=/^[\/]*/}exports.realpathSync=function realpathSync(d,a){d=pathModule.resolve(d);if(a&&Object.prototype.hasOwnProperty.call(a,d)){return a[d]}var f=d,l={},n={};var j;var i;var e;var h;c();function c(){var p=splitRootRe.exec(d);j=p[0].length;i=p[0];e=p[0];h="";if(isWindows&&!n[e]){fs.lstatSync(e);n[e]=true}}while(j<d.length){nextPartRe.lastIndex=j;var o=nextPartRe.exec(d);h=i;i+=o[0];e=h+o[1];j=nextPartRe.lastIndex;if(n[e]||(a&&a[e]===e)){continue}var k;if(a&&Object.prototype.hasOwnProperty.call(a,e)){k=a[e]}else{var g=fs.lstatSync(e);if(!g.isSymbolicLink()){n[e]=true;if(a){a[e]=e}continue}var m=null;if(!isWindows){var b=g.dev.toString(32)+":"+g.ino.toString(32);if(l.hasOwnProperty(b)){m=l[b]}}if(m===null){fs.statSync(e);m=fs.readlinkSync(e)}k=pathModule.resolve(h,m);if(a){a[e]=k}if(!isWindows){l[b]=m}}d=pathModule.resolve(k,d.slice(j));c()}if(a){a[f]=d}return d};exports.realpath=function realpath(d,a,f){if(typeof f!=="function"){f=maybeCallback(a);a=null}d=pathModule.resolve(d);if(a&&Object.prototype.hasOwnProperty.call(a,d)){return process.nextTick(f.bind(null,null,a[d]))}var e=d,n={},o={};var m;var k;var c;var i;b();function b(){var p=splitRootRe.exec(d);m=p[0].length;k=p[0];c=p[0];i="";if(isWindows&&!o[c]){fs.lstat(c,function(q){if(q){return f(q)}o[c]=true;h()})}else{process.nextTick(h)}}function h(){if(m>=d.length){if(a){a[e]=d}return f(null,d)}nextPartRe.lastIndex=m;var p=nextPartRe.exec(d);i=k;k+=p[0];c=i+p[1];m=nextPartRe.lastIndex;if(o[c]||(a&&a[c]===c)){return process.nextTick(h)}if(a&&Object.prototype.hasOwnProperty.call(a,c)){return j(a[c])}return fs.lstat(c,l)}function l(q,p){if(q){return f(q)}if(!p.isSymbolicLink()){o[c]=true;if(a){a[c]=c}return process.nextTick(h)}if(!isWindows){var r=p.dev.toString(32)+":"+p.ino.toString(32);if(n.hasOwnProperty(r)){return g(null,n[r],c)}}fs.stat(c,function(s){if(s){return f(s)}fs.readlink(c,function(t,u){if(!isWindows){n[r]=u}g(t,u)})})}function g(q,s,r){if(q){return f(q)}var p=pathModule.resolve(i,s);if(a){a[r]=p}j(p)}function j(p){d=pathModule.resolve(p,d.slice(m));b()}};