module.exports=realpath;realpath.realpath=realpath;realpath.sync=realpathSync;realpath.realpathSync=realpathSync;realpath.monkeypatch=monkeypatch;realpath.unmonkeypatch=unmonkeypatch;var fs=require("fs");var origRealpath=fs.realpath;var origRealpathSync=fs.realpathSync;var version=process.version;var ok=/^v[0-5]\./.test(version);var old=require("./old.js");function newError(a){return a&&a.syscall==="realpath"&&(a.code==="ELOOP"||a.code==="ENOMEM"||a.code==="ENAMETOOLONG")}function realpath(c,b,a){if(ok){return origRealpath(c,b,a)}if(typeof b==="function"){a=b;b=null}origRealpath(c,b,function(e,d){if(newError(e)){old.realpath(c,b,a)}else{a(e,d)}})}function realpathSync(b,a){if(ok){return origRealpathSync(b,a)}try{return origRealpathSync(b,a)}catch(c){if(newError(c)){return old.realpathSync(b,a)}else{throw c}}}function monkeypatch(){fs.realpath=realpath;fs.realpathSync=realpathSync}function unmonkeypatch(){fs.realpath=origRealpath;fs.realpathSync=origRealpathSync};