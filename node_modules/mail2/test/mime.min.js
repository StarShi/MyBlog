const fs=require("fs");const path=require("path");const assert=require("assert");const MIME=require("../mime");describe("MIME",function(){var a=path.dirname(__dirname)+"/docs/smtp-qq.txt";it("MIME#pipe",function(b){var c=new MIME();c.on("header",function(d){assert.equal(d["Mime-Version"]._,"1.0");assert.equal(d.Subject._,"test");assert.equal(d["Message-ID"]._,"<tencent_4F34D055476789304B5F8318@qq.com>")});c.on("body",function(d){assert.equal(d._,"This is a multi-part message in MIME format.");b()});fs.createReadStream(a).pipe(c)});it("MIME#parse",function(){var b=fs.readFileSync(a,"utf8");var c=MIME.parse(b);assert.equal(c.headers["Mime-Version"]._,"1.0");assert.equal(c.headers.Subject._,"test");assert.equal(c.headers["Message-ID"]._,"<tencent_4F34D055476789304B5F8318@qq.com>");assert.equal(c.body._,"This is a multi-part message in MIME format.");assert.equal(c.body[1].headers["Content-Transfer-Encoding"]._,"base64");assert.equal(c.body[1].body,"PGRpdj50ZXN0IG1haWw8L2Rpdj4=")});it("MIME#lookup",function(){assert.equal(MIME.lookup("a.txt"),"text/plain");assert.deepEqual(MIME.extension("text/plain"),["txt","text","conf","def","list","log","in","ini"])})});