/*!
 * parseurl
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";var url=require("url");var parse=url.parse;var Url=url.Url;module.exports=parseurl;module.exports.original=originalurl;function parseurl(c){var b=c.url;if(b===undefined){return undefined}var a=c._parsedUrl;if(fresh(b,a)){return a}a=fastparse(b);a._raw=b;return(c._parsedUrl=a)}function originalurl(c){var b=c.originalUrl;if(typeof b!=="string"){return parseurl(c)}var a=c._parsedOriginalUrl;if(fresh(b,a)){return a}a=fastparse(b);a._raw=b;return(c._parsedOriginalUrl=a)}function fastparse(f){if(typeof f!=="string"||f.charCodeAt(0)!==47){return parse(f)}var e=f;var d=null;var c=null;for(var b=1;b<f.length;b++){switch(f.charCodeAt(b)){case 63:if(c===null){e=f.substring(0,b);d=f.substring(b+1);c=f.substring(b)}break;case 9:case 10:case 12:case 13:case 32:case 35:case 160:case 65279:return parse(f)}}var a=Url!==undefined?new Url():{};a.path=f;a.href=f;a.pathname=e;a.query=d;a.search=c;return a}function fresh(a,b){return typeof b==="object"&&b!==null&&(Url===undefined||b instanceof Url)&&b._raw===a};