"use strict";var processNextTick=require("process-nextick-args");function destroy(d,a){var e=this;var b=this._readableState&&this._readableState.destroyed;var c=this._writableState&&this._writableState.destroyed;if(b||c){if(a){a(d)}else{if(d&&(!this._writableState||!this._writableState.errorEmitted)){processNextTick(emitErrorNT,this,d)}}return}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(d||null,function(f){if(!a&&f){processNextTick(emitErrorNT,e,f);if(e._writableState){e._writableState.errorEmitted=true}}else{if(a){a(f)}}})}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(a,b){a.emit("error",b)}module.exports={destroy:destroy,undestroy:undestroy};