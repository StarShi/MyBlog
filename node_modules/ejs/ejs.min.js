(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.ejs=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(m,f,C){var h=m("fs");var t=m("path");var y=m("./utils");var i=false;var p=m("../package.json").version;var s="%";var u="locals";var A="ejs";var w="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)";var o=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename"];var l=o.concat("cache");var z=/^\uFEFF/;C.cache=y.cache;C.fileLoader=h.readFileSync;C.localsName=u;C.resolveInclude=function(E,D,K){var H=t.dirname;var J=t.extname;var G=t.resolve;var I=G(K?D:H(D),E);var F=J(E);if(!F){I+=".ejs"}return I};function v(G,E){var H;var F;var D=E.views;if(G.charAt(0)=="/"){H=C.resolveInclude(G.replace(/^\/*/,""),E.root||"/",true)}else{if(E.filename){F=C.resolveInclude(G,E.filename);if(h.existsSync(F)){H=F}}if(!H){if(Array.isArray(D)&&D.some(function(I){F=C.resolveInclude(G,I,true);return h.existsSync(F)})){H=F}}if(!H){throw new Error("Could not find include include file.")}}return H}function g(F,G){var H;var E=F.filename;var D=arguments.length>1;if(F.cache){if(!E){throw new Error("cache option requires a filename")}H=C.cache.get(E);if(H){return H}if(!D){G=e(E).toString().replace(z,"")}}else{if(!D){if(!E){throw new Error("Internal EJS error: no file name or template provided")}G=e(E).toString().replace(z,"")}}H=C.compile(G,F);if(F.cache){C.cache.set(E,H)}return H}function r(F,H,E){var D;try{D=g(F)(H)}catch(G){return E(G)}return E(null,D)}function e(D){return C.fileLoader(D)}function j(F,D){var E=y.shallowCopy({},D);E.filename=v(F,E);return g(E)}function q(H,D){var G=y.shallowCopy({},D);var I;var E;I=v(H,G);E=e(I).toString().replace(z,"");G.filename=I;var F=new B(E,G);F.generateSource();return{source:F.source,filename:I,template:E}}function x(H,K,L,G,J){var M=K.split("\n");var F=Math.max(G-3,0);var I=Math.min(M.length,G+3);var D=J(L);var E=M.slice(F,I).map(function(N,O){var P=O+F+1;return(P==G?" >> ":"    ")+P+"| "+N}).join("\n");H.path=D;H.message=(D||"ejs")+":"+G+"\n"+E+"\n\n"+H.message;throw H}function n(D){return D.replace(/;(\s*$)/,"$1")}C.compile=function k(D,F){var E;if(F&&F.scope){if(!i){console.warn("`scope` option is deprecated and will be removed in EJS 3");i=true}if(!F.context){F.context=F.scope}delete F.scope}E=new B(D,F);return E.compile()};C.render=function(D,H,G){var F=H||{};var E=G||{};if(arguments.length==2){y.shallowCopyFromList(E,F,o)}return g(E,D)(F)};C.renderFile=function(){var E=arguments[0];var D=arguments[arguments.length-1];var F={filename:E};var G;if(arguments.length>2){G=arguments[1];if(arguments.length===3){if(G.settings){if(G.settings["view options"]){y.shallowCopyFromList(F,G.settings["view options"],l)}if(G.settings.views){F.views=G.settings.views}}else{y.shallowCopyFromList(F,G,l)}}else{y.shallowCopy(F,arguments[2])}F.filename=E}else{G={}}return r(F,G,D)};C.clearCache=function(){C.cache.reset()};function B(F,E){E=E||{};var D={};this.templateText=F;this.mode=null;this.truncate=false;this.currentLine=1;this.source="";this.dependencies=[];D.client=E.client||false;D.escapeFunction=E.escape||y.escapeXML;D.compileDebug=E.compileDebug!==false;D.debug=!!E.debug;D.filename=E.filename;D.delimiter=E.delimiter||C.delimiter||s;D.strict=E.strict||false;D.context=E.context;D.cache=E.cache||false;D.rmWhitespace=E.rmWhitespace;D.root=E.root;D.localsName=E.localsName||C.localsName||u;D.views=E.views;if(D.strict){D._with=false}else{D._with=typeof E._with!="undefined"?E._with:true}this.opts=D;this.regex=this.createRegex()}B.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"};B.prototype={createRegex:function(){var E=w;var D=y.escapeRegExpChars(this.opts.delimiter);E=E.replace(/%/g,D);return new RegExp(E)},compile:function(){var K;var G;var H=this.opts;var D="";var E="";var F=H.escapeFunction;if(!this.source){this.generateSource();D+="  var __output = [], __append = __output.push.bind(__output);\n";if(H._with!==false){D+="  with ("+H.localsName+" || {}) {\n";E+="  }\n"}E+='  return __output.join("");\n';this.source=D+this.source+E}if(H.compileDebug){K="var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(H.filename?JSON.stringify(H.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n"}else{K=this.source}if(H.client){K="escapeFn = escapeFn || "+F.toString()+";\n"+K;if(H.compileDebug){K="rethrow = rethrow || "+x.toString()+";\n"+K}}if(H.strict){K='"use strict";\n'+K}if(H.debug){console.log(K)}try{G=new Function(H.localsName+", escapeFn, include, rethrow",K)}catch(I){if(I instanceof SyntaxError){if(H.filename){I.message+=" in "+H.filename}I.message+=" while compiling ejs\n\n";I.message+="If the above error is not helpful, you may want to try EJS-Lint:\n";I.message+="https://github.com/RyanZim/EJS-Lint"}throw I}if(H.client){G.dependencies=this.dependencies;return G}var J=function(M){var L=function(O,N){var P=y.shallowCopy({},M);if(N){P=y.shallowCopy(P,N)}return j(O,H)(P)};return G.apply(H.context,[M||{},F,L,x])};J.dependencies=this.dependencies;return J},generateSource:function(){var E=this.opts;if(E.rmWhitespace){this.templateText=this.templateText.replace(/\r/g,"").replace(/^\s+|\s+$/gm,"")}this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var D=this;var F=this.parseTemplateText();var G=this.opts.delimiter;if(F&&F.length){F.forEach(function(J,L){var I;var N;var H;var O;var K;var M;if(J.indexOf("<"+G)===0&&J.indexOf("<"+G+G)!==0){N=F[L+2];if(!(N==G+">"||N=="-"+G+">"||N=="_"+G+">")){throw new Error('Could not find matching close tag for "'+J+'".')}}if((H=J.match(/^\s*include\s+(\S+)/))){I=F[L-1];if(I&&(I=="<"+G||I=="<"+G+"-"||I=="<"+G+"_")){O=y.shallowCopy({},D.opts);K=q(H[1],O);if(D.opts.compileDebug){M="    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(K.template)+"\n      , __filename = "+JSON.stringify(K.filename)+";\n      try {\n"+K.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n"}else{M="    ; (function(){\n"+K.source+"    ; }).call(this)\n"}D.source+=M;D.dependencies.push(C.resolveInclude(H[1],O.filename));return}}D.scanLine(J)})}},parseTemplateText:function(){var G=this.templateText;var F=this.regex;var E=F.exec(G);var D=[];var H;while(E){H=E.index;if(H!==0){D.push(G.substring(0,H));G=G.slice(H)}D.push(E[0]);G=G.slice(E[0].length);E=F.exec(G)}if(G){D.push(G)}return D},_addOutput:function(D){if(this.truncate){D=D.replace(/^(?:\r\n|\r|\n)/,"");this.truncate=false}else{if(this.opts.rmWhitespace){D=D.replace(/^\n/,"")}}if(!D){return D}D=D.replace(/\\/g,"\\\\");D=D.replace(/\n/g,"\\n");D=D.replace(/\r/g,"\\r");D=D.replace(/"/g,'\\"');this.source+='    ; __append("'+D+'")\n'},scanLine:function(D){var E=this;var G=this.opts.delimiter;var F=0;F=(D.split("\n").length-1);switch(D){case"<"+G:case"<"+G+"_":this.mode=B.modes.EVAL;break;case"<"+G+"=":this.mode=B.modes.ESCAPED;break;case"<"+G+"-":this.mode=B.modes.RAW;break;case"<"+G+"#":this.mode=B.modes.COMMENT;break;case"<"+G+G:this.mode=B.modes.LITERAL;this.source+='    ; __append("'+D.replace("<"+G+G,"<"+G)+'")\n';break;case G+G+">":this.mode=B.modes.LITERAL;this.source+='    ; __append("'+D.replace(G+G+">",G+">")+'")\n';break;case G+">":case"-"+G+">":case"_"+G+">":if(this.mode==B.modes.LITERAL){this._addOutput(D)}this.mode=null;this.truncate=D.indexOf("-")===0||D.indexOf("_")===0;break;default:if(this.mode){switch(this.mode){case B.modes.EVAL:case B.modes.ESCAPED:case B.modes.RAW:if(D.lastIndexOf("//")>D.lastIndexOf("\n")){D+="\n"}}switch(this.mode){case B.modes.EVAL:this.source+="    ; "+D+"\n";break;case B.modes.ESCAPED:this.source+="    ; __append(escapeFn("+n(D)+"))\n";break;case B.modes.RAW:this.source+="    ; __append("+n(D)+")\n";break;case B.modes.COMMENT:break;case B.modes.LITERAL:this._addOutput(D);break}}else{this._addOutput(D)}}if(E.opts.compileDebug&&F){this.currentLine+=F;this.source+="    ; __line = "+this.currentLine+"\n"}}};C.escapeXML=y.escapeXML;C.__express=C.renderFile;if(m.extensions){m.extensions[".ejs"]=function(F,I){var D=I||F.filename;var E={filename:D,client:true};var H=e(D).toString();var G=C.compile(H,E);F._compile("module.exports = "+G.toString()+";",D)}}C.VERSION=p;C.name=A;if(typeof window!="undefined"){window.ejs=C}},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(h,i,g){var f=/[|\\{}()[\]^$+*?.]/g;g.escapeRegExpChars=function(m){if(!m){return""}return String(m).replace(f,"\\$&")};var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};var l=/[&<>\'"]/g;function k(m){return e[m]||m}var j='var _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n';g.escapeXML=function(m){return m==undefined?"":String(m).replace(l,k)};g.escapeXML.toString=function(){return Function.prototype.toString.call(this)+";\n"+j};g.shallowCopy=function(o,n){n=n||{};for(var m in n){o[m]=n[m]}return o};g.shallowCopyFromList=function(r,q,n){for(var m=0;m<n.length;m++){var o=n[m];if(typeof q[o]!="undefined"){r[o]=q[o]}}return r};g.cache={_data:{},set:function(m,n){this._data[m]=n},get:function(m){return this._data[m]},reset:function(){this._data={}}}},{}],3:[function(f,g,e){},{}],4:[function(f,g,e){(function(m){function k(r,o){var n=0;for(var p=r.length-1;p>=0;p--){var q=r[p];if(q==="."){r.splice(p,1)}else{if(q===".."){r.splice(p,1);n++}else{if(n){r.splice(p,1);n--}}}}if(o){for(;n--;n){r.unshift("..")}}return r}var j=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var h=function(n){return j.exec(n).slice(1)};e.resolve=function(){var p="",n=false;for(var o=arguments.length-1;o>=-1&&!n;o--){var q=(o>=0)?arguments[o]:m.cwd();if(typeof q!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else{if(!q){continue}}p=q+"/"+p;n=q.charAt(0)==="/"}p=k(i(p.split("/"),function(r){return !!r}),!n).join("/");return((n?"/":"")+p)||"."};e.normalize=function(p){var o=e.isAbsolute(p),n=l(p,-1)==="/";p=k(i(p.split("/"),function(q){return !!q}),!o).join("/");if(!p&&!o){p="."}if(p&&n){p+="/"}return(o?"/":"")+p};e.isAbsolute=function(n){return n.charAt(0)==="/"};e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(i(n,function(q,o){if(typeof q!=="string"){throw new TypeError("Arguments to path.join must be strings")}return q}).join("/"))};e.relative=function(t,u){t=e.resolve(t).substr(1);u=e.resolve(u).substr(1);function p(w){var y=0;for(;y<w.length;y++){if(w[y]!==""){break}}var x=w.length-1;for(;x>=0;x--){if(w[x]!==""){break}}if(y>x){return[]}return w.slice(y,x-y+1)}var s=p(t.split("/"));var o=p(u.split("/"));var n=Math.min(s.length,o.length);var v=n;for(var r=0;r<n;r++){if(s[r]!==o[r]){v=r;break}}var q=[];for(var r=v;r<s.length;r++){q.push("..")}q=q.concat(o.slice(v));return q.join("/")};e.sep="/";e.delimiter=":";e.dirname=function(q){var n=h(q),o=n[0],p=n[1];if(!o&&!p){return"."}if(p){p=p.substr(0,p.length-1)}return o+p};e.basename=function(p,n){var o=h(p)[2];if(n&&o.substr(-1*n.length)===n){o=o.substr(0,o.length-n.length)}return o};e.extname=function(n){return h(n)[3]};function i(n,q){if(n.filter){return n.filter(q)}var p=[];for(var o=0;o<n.length;o++){if(q(n[o],o,n)){p.push(n[o])}}return p}var l="ab".substr(-1)==="b"?function(o,p,n){return o.substr(p,n)}:function(o,p,n){if(p<0){p=o.length+p}return o.substr(p,n)}}).call(this,f("_process"))},{_process:5}],5:[function(j,e,v){var m=e.exports={};var n;var p;function k(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=k}}catch(w){n=k}try{if(typeof clearTimeout==="function"){p=clearTimeout}else{p=t}}catch(w){p=t}}());function i(w){if(n===setTimeout){return setTimeout(w,0)}if((n===k||!n)&&setTimeout){n=setTimeout;return setTimeout(w,0)}try{return n(w,0)}catch(x){try{return n.call(null,w,0)}catch(x){return n.call(this,w,0)}}}function h(w){if(p===clearTimeout){return clearTimeout(w)}if((p===t||!p)&&clearTimeout){p=clearTimeout;return clearTimeout(w)}try{return p(w)}catch(x){try{return p.call(null,w)}catch(x){return p.call(this,w)}}}var q=[];var u=false;var l;var r=-1;function o(){if(!u||!l){return}u=false;if(l.length){q=l.concat(q)}else{r=-1}if(q.length){s()}}function s(){if(u){return}var x=i(o);u=true;var w=q.length;while(w){l=q;q=[];while(++r<w){if(l){l[r].run()}}r=-1;w=q.length}l=null;u=false;h(x)}m.nextTick=function(w){var x=new Array(arguments.length-1);if(arguments.length>1){for(var y=1;y<arguments.length;y++){x[y-1]=arguments[y]}}q.push(new f(w,x));if(q.length===1&&!u){i(s)}};function f(w,x){this.fun=w;this.array=x}f.prototype.run=function(){this.fun.apply(null,this.array)};m.title="browser";m.browser=true;m.env={};m.argv=[];m.version="";m.versions={};function g(){}m.on=g;m.addListener=g;m.once=g;m.off=g;m.removeListener=g;m.removeAllListeners=g;m.emit=g;m.binding=function(w){throw new Error("process.binding is not supported")};m.cwd=function(){return"/"};m.chdir=function(w){throw new Error("process.chdir is not supported")};m.umask=function(){return 0}},{}],6:[function(f,g,e){g.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.5.6",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.0.1",eslint:"^3.0.0","git-directory-deploy":"^1.5.1",istanbul:"~0.4.3",jake:"^8.0.0",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^3.0.2","uglify-js":"^2.6.2"},engines:{node:">=0.10.0"},scripts:{test:"jake test",lint:'eslint "**/*.js" Jakefile',coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"jake doc",devdoc:"jake doc[dev]"}}},{}]},{},[1])(1)});