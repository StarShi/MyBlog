"use strict";var isWindows=process.platform==="win32";var util=require("util");function normalizeArray(e,a){var c=[];for(var b=0;b<e.length;b++){var d=e[b];if(!d||d==="."){continue}if(d===".."){if(c.length&&c[c.length-1]!==".."){c.pop()}else{if(a){c.push("..")}}}else{c.push(d)}}return c}function trimArray(a){var d=a.length-1;var c=0;for(;c<=d;c++){if(a[c]){break}}var b=d;for(;b>=0;b--){if(a[b]){break}}if(c===0&&b===d){return a}if(c>b){return[]}return a.slice(c,b+1)}var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;var splitTailRe=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/;var win32={};function win32SplitPath(b){var a=splitDeviceRe.exec(b),g=(a[1]||"")+(a[2]||""),e=a[3]||"";var d=splitTailRe.exec(e),c=d[1],h=d[2],f=d[3];return[g,c,h,f]}function win32StatPath(c){var a=splitDeviceRe.exec(c),b=a[1]||"",d=!!b&&b[1]!==":";return{device:b,isUnc:d,isAbsolute:d||!!a[2],tail:a[3]}}function normalizeUNCRoot(a){return"\\\\"+a.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}win32.resolve=function(){var c="",f="",j=false;for(var b=arguments.length-1;b>=-1;b--){var h;if(b>=0){h=arguments[b]}else{if(!c){h=process.cwd()}else{h=process.env["="+c];if(!h||h.substr(0,3).toLowerCase()!==c.toLowerCase()+"\\"){h=c+"\\"}}}if(!util.isString(h)){throw new TypeError("Arguments to path.resolve must be strings")}else{if(!h){continue}}var k=win32StatPath(h),a=k.device,g=k.isUnc,d=k.isAbsolute,e=k.tail;if(a&&c&&a.toLowerCase()!==c.toLowerCase()){continue}if(!c){c=a}if(!j){f=e+"\\"+f;j=d}if(c&&j){break}}if(g){c=normalizeUNCRoot(c)}f=normalizeArray(f.split(/[\\\/]+/),!j).join("\\");return(c+(j?"\\":"")+f)||"."};win32.normalize=function(f){var a=win32StatPath(f),d=a.device,g=a.isUnc,e=a.isAbsolute,b=a.tail,c=/[\\\/]$/.test(b);b=normalizeArray(b.split(/[\\\/]+/),!e).join("\\");if(!b&&!e){b="."}if(b&&c){b+="\\"}if(g){d=normalizeUNCRoot(d)}return d+(e?"\\":"")+b};win32.isAbsolute=function(a){return win32StatPath(a).isAbsolute};win32.join=function(){var d=[];for(var b=0;b<arguments.length;b++){var a=arguments[b];if(!util.isString(a)){throw new TypeError("Arguments to path.join must be strings")}if(a){d.push(a)}}var c=d.join("\\");if(!/^[\\\/]{2}[^\\\/]/.test(d[0])){c=c.replace(/^[\\\/]{2,}/,"\\")}return win32.normalize(c)};win32.relative=function(j,k){j=win32.resolve(j);k=win32.resolve(k);var g=j.toLowerCase();var h=k.toLowerCase();var b=trimArray(k.split("\\"));var d=trimArray(g.split("\\"));var f=trimArray(h.split("\\"));var a=Math.min(d.length,f.length);var l=a;for(var e=0;e<a;e++){if(d[e]!==f[e]){l=e;break}}if(l==0){return k}var c=[];for(var e=l;e<d.length;e++){c.push("..")}c=c.concat(b.slice(l));return c.join("\\")};win32._makeLong=function(b){if(!util.isString(b)){return b}if(!b){return""}var a=win32.resolve(b);if(/^[a-zA-Z]\:\\/.test(a)){return"\\\\?\\"+a}else{if(/^\\\\[^?.]/.test(a)){return"\\\\?\\UNC\\"+a.substring(2)}}return b};win32.dirname=function(d){var a=win32SplitPath(d),b=a[0],c=a[1];if(!b&&!c){return"."}if(c){c=c.substr(0,c.length-1)}return b+c};win32.basename=function(c,a){var b=win32SplitPath(c)[2];if(a&&b.substr(-1*a.length)===a){b=b.substr(0,b.length-a.length)}return b};win32.extname=function(a){return win32SplitPath(a)[3]};win32.format=function(b){if(!util.isObject(b)){throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof b)}var a=b.root||"";if(!util.isString(a)){throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof b.root)}var c=b.dir;var d=b.base||"";if(!c){return d}if(c[c.length-1]===win32.sep){return c+d}return c+win32.sep+d};win32.parse=function(b){if(!util.isString(b)){throw new TypeError("Parameter 'pathString' must be a string, not "+typeof b)}var a=win32SplitPath(b);if(!a||a.length!==4){throw new TypeError("Invalid path '"+b+"'")}return{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}};win32.sep="\\";win32.delimiter=";";var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var posix={};function posixSplitPath(a){return splitPathRe.exec(a).slice(1)}posix.resolve=function(){var c="",a=false;for(var b=arguments.length-1;b>=-1&&!a;b--){var d=(b>=0)?arguments[b]:process.cwd();if(!util.isString(d)){throw new TypeError("Arguments to path.resolve must be strings")}else{if(!d){continue}}c=d+"/"+c;a=d[0]==="/"}c=normalizeArray(c.split("/"),!a).join("/");return((a?"/":"")+c)||"."};posix.normalize=function(c){var b=posix.isAbsolute(c),a=c&&c[c.length-1]==="/";c=normalizeArray(c.split("/"),!b).join("/");if(!c&&!b){c="."}if(c&&a){c+="/"}return(b?"/":"")+c};posix.isAbsolute=function(a){return a.charAt(0)==="/"};posix.join=function(){var c="";for(var a=0;a<arguments.length;a++){var b=arguments[a];if(!util.isString(b)){throw new TypeError("Arguments to path.join must be strings")}if(b){if(!c){c+=b}else{c+="/"+b}}}return posix.normalize(c)};posix.relative=function(h,g){h=posix.resolve(h).substr(1);g=posix.resolve(g).substr(1);var f=trimArray(h.split("/"));var c=trimArray(g.split("/"));var e=Math.min(f.length,c.length);var a=e;for(var d=0;d<e;d++){if(f[d]!==c[d]){a=d;break}}var b=[];for(var d=a;d<f.length;d++){b.push("..")}b=b.concat(c.slice(a));return b.join("/")};posix._makeLong=function(a){return a};posix.dirname=function(d){var a=posixSplitPath(d),b=a[0],c=a[1];if(!b&&!c){return"."}if(c){c=c.substr(0,c.length-1)}return b+c};posix.basename=function(c,a){var b=posixSplitPath(c)[2];if(a&&b.substr(-1*a.length)===a){b=b.substr(0,b.length-a.length)}return b};posix.extname=function(a){return posixSplitPath(a)[3]};posix.format=function(b){if(!util.isObject(b)){throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof b)}var a=b.root||"";if(!util.isString(a)){throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof b.root)}var c=b.dir?b.dir+posix.sep:"";var d=b.base||"";return c+d};posix.parse=function(b){if(!util.isString(b)){throw new TypeError("Parameter 'pathString' must be a string, not "+typeof b)}var a=posixSplitPath(b);if(!a||a.length!==4){throw new TypeError("Invalid path '"+b+"'")}a[1]=a[1]||"";a[2]=a[2]||"";a[3]=a[3]||"";return{root:a[0],dir:a[0]+a[1].slice(0,-1),base:a[2],ext:a[3],name:a[2].slice(0,a[2].length-a[3].length)}};posix.sep="/";posix.delimiter=":";if(isWindows){module.exports=win32}else{module.exports=posix}module.exports.posix=posix;module.exports.win32=win32;