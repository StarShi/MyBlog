var objectAssign=require("object-assign");function arrayRemove(b,c){var a=b.indexOf(c);if(~a){b.splice(a,1)}}function FileAppender(b,a){this.strategy=b;this.req=a;switch(b){case"NONE":break;case"VALUE":break;case"ARRAY":a.files=[];break;case"OBJECT":a.files=Object.create(null);break;default:throw new Error("Unknown file strategy: "+b)}}FileAppender.prototype.insertPlaceholder=function(a){var b={fieldname:a.fieldname};switch(this.strategy){case"NONE":break;case"VALUE":break;case"ARRAY":this.req.files.push(b);break;case"OBJECT":if(this.req.files[a.fieldname]){this.req.files[a.fieldname].push(b)}else{this.req.files[a.fieldname]=[b]}break}return b};FileAppender.prototype.removePlaceholder=function(a){switch(this.strategy){case"NONE":break;case"VALUE":break;case"ARRAY":arrayRemove(this.req.files,a);break;case"OBJECT":if(this.req.files[a.fieldname].length===1){delete this.req.files[a.fieldname]}else{arrayRemove(this.req.files[a.fieldname],a)}break}};FileAppender.prototype.replacePlaceholder=function(b,a){if(this.strategy==="VALUE"){this.req.file=a;return}delete b.fieldname;objectAssign(b,a)};module.exports=FileAppender;