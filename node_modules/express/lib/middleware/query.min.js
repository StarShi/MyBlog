/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";var merge=require("utils-merge");var parseUrl=require("parseurl");var qs=require("qs");module.exports=function query(a){var b=merge({},a);var d=qs.parse;if(typeof a==="function"){d=a;b=undefined}if(b!==undefined&&b.allowPrototypes===undefined){b.allowPrototypes=true}return function c(g,e,f){if(!g.query){var h=parseUrl(g).query;g.query=d(h,b)}f()}};