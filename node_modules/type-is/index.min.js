/*!
 * type-is
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";var typer=require("media-typer");var mime=require("mime-types");module.exports=typeofrequest;module.exports.is=typeis;module.exports.hasBody=hasbody;module.exports.normalize=normalize;module.exports.match=mimeMatch;function typeis(e,d){var b;var a=d;var f=tryNormalizeType(e);if(!f){return false}if(a&&!Array.isArray(a)){a=new Array(arguments.length-1);for(b=0;b<a.length;b++){a[b]=arguments[b+1]}}if(!a||!a.length){return f}var c;for(b=0;b<a.length;b++){if(mimeMatch(normalize(c=a[b]),f)){return c[0]==="+"||c.indexOf("*")!==-1?f:c}}return false}function hasbody(a){return a.headers["transfer-encoding"]!==undefined||!isNaN(a.headers["content-length"])}function typeofrequest(d,c){var b=c;if(!hasbody(d)){return null}if(arguments.length>2){b=new Array(arguments.length-1);for(var a=0;a<b.length;a++){b[a]=arguments[a+1]}}var e=d.headers["content-type"];return typeis(e,b)}function normalize(a){if(typeof a!=="string"){return false}switch(a){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":return"multipart/*"}if(a[0]==="+"){return"*/*"+a}return a.indexOf("/")===-1?mime.lookup(a):a}function mimeMatch(c,d){if(c===false){return false}var a=d.split("/");var b=c.split("/");if(a.length!==2||b.length!==2){return false}if(b[0]!=="*"&&b[0]!==a[0]){return false}if(b[1].substr(0,2)==="*+"){return b[1].length<=a[1].length+1&&b[1].substr(1)===a[1].substr(1-b[1].length)}if(b[1]!=="*"&&b[1]!==a[1]){return false}return true}function normalizeType(b){var a=typer.parse(b);a.parameters=undefined;return typer.format(a)}function tryNormalizeType(b){try{return normalizeType(b)}catch(a){return null}};