/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
;"use strict";exports.parse=parse;exports.serialize=serialize;var decode=decodeURIComponent;var encode=encodeURIComponent;var pairSplitRegExp=/; */;var fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(j,l){if(typeof j!=="string"){throw new TypeError("argument str must be a string")}var g={};var b=l||{};var a=j.split(pairSplitRegExp);var e=b.decode||decode;for(var h=0;h<a.length;h++){var f=a[h];var d=f.indexOf("=");if(d<0){continue}var k=f.substr(0,d).trim();var c=f.substr(++d,f.length).trim();if('"'==c[0]){c=c.slice(1,-1)}if(undefined==g[k]){g[k]=tryDecode(c,e)}}return g}function serialize(a,c,i){var b=i||{};var d=b.encode||encode;if(typeof d!=="function"){throw new TypeError("option encode is invalid")}if(!fieldContentRegExp.test(a)){throw new TypeError("argument name is invalid")}var g=d(c);if(g&&!fieldContentRegExp.test(g)){throw new TypeError("argument val is invalid")}var f=a+"="+g;if(null!=b.maxAge){var e=b.maxAge-0;if(isNaN(e)){throw new Error("maxAge should be a Number")}f+="; Max-Age="+Math.floor(e)}if(b.domain){if(!fieldContentRegExp.test(b.domain)){throw new TypeError("option domain is invalid")}f+="; Domain="+b.domain}if(b.path){if(!fieldContentRegExp.test(b.path)){throw new TypeError("option path is invalid")}f+="; Path="+b.path}if(b.expires){if(typeof b.expires.toUTCString!=="function"){throw new TypeError("option expires is invalid")}f+="; Expires="+b.expires.toUTCString()}if(b.httpOnly){f+="; HttpOnly"}if(b.secure){f+="; Secure"}if(b.sameSite){var h=typeof b.sameSite==="string"?b.sameSite.toLowerCase():b.sameSite;switch(h){case true:f+="; SameSite=Strict";break;case"lax":f+="; SameSite=Lax";break;case"strict":f+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return f}function tryDecode(c,b){try{return b(c)}catch(a){return c}};